<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Kitchen For Me</title>
  <meta name="description" content="Share & Discover Family Recipes">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Poppins', sans-serif; background: #f8fafc; }
    
    /* Navigation */
    .nav { background: white; padding: 15px 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
    .nav-container { max-width: 1000px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
    .nav-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; color: inherit; }
    .nav-logo-icon { font-size: 1.8rem; }
    .nav-logo-text { font-size: 1.2rem; font-weight: 700; color: #7c3aed; }
    .nav-links { display: flex; gap: 20px; }
    .nav-links a { text-decoration: none; color: #6b7280; font-weight: 500; font-size: 0.9rem; }
    .nav-links a:hover { color: #7c3aed; }
    
    /* Page Container */
    .page { display: none; }
    .page.active { display: block; }
    
    /* HOME PAGE */
    .hero { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 60px 20px; text-align: center; color: white; }
    .hero h1 { font-size: 2.5rem; font-weight: 800; margin-bottom: 15px; }
    .hero p { font-size: 1.1rem; opacity: 0.9; max-width: 500px; margin: 0 auto 25px; }
    .btn { padding: 12px 25px; border-radius: 10px; font-family: inherit; font-size: 1rem; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: transform 0.2s; border: none; }
    .btn:hover { transform: translateY(-2px); }
    .btn-primary { background: white; color: #7c3aed; }
    .btn-secondary { background: transparent; color: white; border: 2px solid white; }
    
    .features { padding: 60px 20px; max-width: 1000px; margin: 0 auto; }
    .section-title { text-align: center; font-size: 1.8rem; font-weight: 700; margin-bottom: 40px; }
    .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 25px; }
    .feature-card { background: white; padding: 25px; border-radius: 16px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    .feature-icon { font-size: 2.5rem; margin-bottom: 12px; }
    .feature-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 8px; }
    .feature-desc { color: #6b7280; font-size: 0.9rem; line-height: 1.5; }
    
    /* SHARE PAGE */
    .share-container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .share-header { text-align: center; padding: 20px 0; color: #1f2937; }
    
    .recipe-card { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
    .recipe-header { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); padding: 25px; color: white; }
    .recipe-title { font-size: 1.4rem; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
    .recipe-meta { display: flex; gap: 12px; flex-wrap: wrap; }
    .meta-badge { background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; }
    .meal-type-badge { background: rgba(255,255,255,0.3); padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }
    
    .recipe-body { padding: 25px; }
    .section { margin-bottom: 25px; }
    .section-label { font-size: 1rem; font-weight: 600; color: #374151; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
    
    .ingredients-list { list-style: none; display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 8px; }
    .ingredients-list li { background: #f3f4f6; padding: 10px 15px; border-radius: 10px; font-size: 0.9rem; color: #4b5563; }
    
    .instructions-list { list-style: none; counter-reset: step; }
    .instructions-list li { counter-increment: step; padding: 15px 15px 15px 50px; position: relative; background: #fefce8; border-radius: 10px; margin-bottom: 10px; font-size: 0.95rem; color: #4b5563; line-height: 1.5; }
    .instructions-list li::before { content: counter(step); position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 25px; height: 25px; background: #f97316; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 600; }
    
    /* Rating */
    .rating-section { background: #f0fdf4; padding: 20px; border-radius: 15px; text-align: center; }
    .rating-title { font-weight: 600; color: #166534; margin-bottom: 15px; }
    .stars { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; }
    .star { font-size: 2rem; cursor: pointer; transition: transform 0.2s; filter: grayscale(100%); }
    .star:hover, .star.active { filter: grayscale(0%); transform: scale(1.1); }
    .comment-input { width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 10px; font-family: inherit; font-size: 0.9rem; resize: vertical; min-height: 70px; margin-bottom: 15px; }
    .comment-input:focus { outline: none; border-color: #22c55e; }
    .submit-btn { background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; border: none; padding: 12px 25px; border-radius: 10px; font-family: inherit; font-size: 1rem; font-weight: 600; cursor: pointer; }
    .submit-btn:hover { transform: translateY(-2px); }
    .success-msg { display: none; background: #dcfce7; border: 2px solid #22c55e; color: #166534; padding: 12px; border-radius: 10px; margin-top: 15px; }
    .success-msg.show { display: block; }
    
    /* Share buttons */
    .share-section { padding: 20px; background: #f9fafb; border-top: 1px solid #e5e7eb; }
    .share-title { font-size: 0.9rem; font-weight: 600; color: #6b7280; margin-bottom: 12px; text-align: center; }
    .share-buttons { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
    .share-btn { padding: 10px 18px; border-radius: 10px; border: none; font-family: inherit; font-size: 0.9rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; color: white; }
    .share-btn:hover { transform: translateY(-2px); }
    .share-btn.facebook { background: #1877f2; }
    .share-btn.whatsapp { background: #25d366; }
    .share-btn.copy { background: #6b7280; }
    
    /* Empty state */
    .empty-state { text-align: center; padding: 50px 20px; }
    .empty-icon { font-size: 4rem; margin-bottom: 15px; }
    .empty-title { font-size: 1.2rem; font-weight: 600; color: #374151; margin-bottom: 10px; }
    .empty-desc { color: #6b7280; margin-bottom: 20px; }
    
    /* Footer */
    .footer { background: #1f2937; color: white; padding: 30px 20px; text-align: center; }
    .footer p { color: #9ca3af; font-size: 0.85rem; }
    .footer a { color: #9ca3af; text-decoration: none; margin: 0 10px; }
    .footer a:hover { color: white; }
    
    /* Toast */
    .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: #1f2937; color: white; padding: 12px 25px; border-radius: 10px; font-size: 0.9rem; opacity: 0; transition: all 0.3s; z-index: 1000; }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    
    @media (max-width: 600px) {
      .hero h1 { font-size: 1.8rem; }
      .nav-links { display: none; }
      .ingredients-list { grid-template-columns: 1fr; }
      .share-buttons { flex-direction: column; }
      .share-btn { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <a href="#" class="nav-logo" onclick="showPage('home'); return false;">
        <span class="nav-logo-icon">üç≥</span>
        <span class="nav-logo-text">Smart Kitchen For Me</span>
      </a>
      <div class="nav-links">
        <a href="#" onclick="showPage('home'); return false;">Home</a>
        <a href="#" onclick="showPage('share'); return false;">Share Recipe</a>
      </div>
    </div>
  </nav>

  <!-- HOME PAGE -->
  <div id="home-page" class="page active">
    <section class="hero">
      <h1>üç≥ Share & Discover<br>Family Recipes</h1>
      <p>Create AI-powered recipes, share with family & friends, and explore dishes from our community!</p>
      <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
        <a href="#" class="btn btn-primary" onclick="showPage('share'); return false;">üì§ Share a Recipe</a>
      </div>
    </section>
    
    <section class="features">
      <h2 class="section-title">Why Smart Kitchen For Me?</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">ü§ñ</div>
          <h3 class="feature-title">AI-Powered Recipes</h3>
          <p class="feature-desc">Generate recipes based on ingredients you have at home.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
          <h3 class="feature-title">Share with Family</h3>
          <p class="feature-desc">Instantly share recipes with family members.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">‚≠ê</div>
          <h3 class="feature-title">Community Ratings</h3>
          <p class="feature-desc">Rate and review recipes from the community.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üè•</div>
          <h3 class="feature-title">Health-Aware</h3>
          <p class="feature-desc">Recipes adapted for dietary restrictions.</p>
        </div>
      </div>
    </section>
  </div>

  <!-- SHARE PAGE -->
  <div id="share-page" class="page">
    <div class="share-container">
      <div class="share-header">
        <h2>üì§ Shared Recipe</h2>
      </div>
      
      <div class="recipe-card">
        <!-- Empty State -->
        <div id="empty-state" class="empty-state">
          <div class="empty-icon">üë®‚Äçüç≥</div>
          <div class="empty-title">No Recipe Found</div>
          <div class="empty-desc">Share recipes from the Smart Kitchen app to see them here!</div>
          <a href="#" class="btn btn-primary" onclick="showPage('home'); return false;">‚Üê Back to Home</a>
        </div>
        
        <!-- Recipe Display -->
        <div id="recipe-display" style="display: none;">
          <div class="recipe-header">
            <div class="recipe-title">
              <span>üë®‚Äçüç≥</span>
              <span id="recipe-title-text"></span>
            </div>
            <div class="recipe-meta">
              <span class="meta-badge">‚è±Ô∏è <span id="recipe-time-text"></span></span>
              <span class="meta-badge">üìä <span id="recipe-difficulty-text"></span></span>
              <span class="meal-type-badge" id="recipe-meal-type" style="display: none;">
                <span id="recipe-meal-icon"></span> <span id="recipe-meal-text"></span>
              </span>
            </div>
          </div>
          
          <div class="recipe-body">
            <div class="section">
              <div class="section-label">ü•ó Ingredients</div>
              <ul class="ingredients-list" id="ingredients-list"></ul>
            </div>
            
            <div class="section">
              <div class="section-label">üìù Instructions</div>
              <ol class="instructions-list" id="instructions-list"></ol>
            </div>
            
            <div class="section">
              <div class="rating-section">
                <div class="rating-title">‚≠ê Rate this recipe!</div>
                <div class="stars" id="stars">
                  <span class="star" data-rating="1">‚≠ê</span>
                  <span class="star" data-rating="2">‚≠ê</span>
                  <span class="star" data-rating="3">‚≠ê</span>
                  <span class="star" data-rating="4">‚≠ê</span>
                  <span class="star" data-rating="5">‚≠ê</span>
                </div>
                <textarea class="comment-input" id="comment-input" placeholder="Share your thoughts... (optional)"></textarea>
                <button class="submit-btn" id="submit-rating">Submit Rating</button>
                <div class="success-msg" id="success-msg">‚úÖ Thank you for your rating!</div>
              </div>
            </div>
          </div>
          
          <div class="share-section">
            <div class="share-title">Share this recipe</div>
            <div class="share-buttons">
              <button class="share-btn facebook" onclick="shareToFacebook()">üìò Facebook</button>
              <button class="share-btn whatsapp" onclick="shareToWhatsApp()">üí¨ WhatsApp</button>
              <button class="share-btn copy" onclick="copyLink()">üìã Copy Link</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>¬© 2025 Smart Kitchen For Me</p>
    <p style="margin-top: 10px;">
      <a href="#" onclick="showPage('home'); return false;">Home</a>
      <a href="#" onclick="showPage('share'); return false;">Share</a>
    </p>
  </footer>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    let currentRecipe = null;
    let selectedRating = 0;

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Check if there's a recipe in the URL
      const urlParams = new URLSearchParams(window.location.search);
      const recipeData = urlParams.get('recipe');
      
      if (recipeData) {
        showPage('share');
        parseRecipe(recipeData);
      }
      
      setupStars();
      setupSubmit();
    });

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId + '-page').classList.add('active');
      window.scrollTo(0, 0);
    }

    function parseRecipe(data) {
      try {
        currentRecipe = JSON.parse(decodeURIComponent(data));
        displayRecipe(currentRecipe);
      } catch (e) {
        console.error('Failed to parse recipe:', e);
      }
    }

    function displayRecipe(recipe) {
      document.getElementById('empty-state').style.display = 'none';
      document.getElementById('recipe-display').style.display = 'block';
      
      document.getElementById('recipe-title-text').textContent = recipe.title || 'Untitled';
      document.getElementById('recipe-time-text').textContent = recipe.time || 'N/A';
      document.getElementById('recipe-difficulty-text').textContent = recipe.difficulty || 'Easy';
      
      // Meal type
      if (recipe.mealType && recipe.mealType !== 'any') {
        const icons = { breakfast: 'üåÖ', lunch: '‚òÄÔ∏è', dinner: 'üåô' };
        const labels = { breakfast: 'Breakfast', lunch: 'Lunch', dinner: 'Dinner' };
        document.getElementById('recipe-meal-icon').textContent = icons[recipe.mealType] || 'üçΩÔ∏è';
        document.getElementById('recipe-meal-text').textContent = labels[recipe.mealType] || recipe.mealType;
        document.getElementById('recipe-meal-type').style.display = 'inline';
      }
      
      // Ingredients
      const ingredientsList = document.getElementById('ingredients-list');
      ingredientsList.innerHTML = '';
      (recipe.ingredients || []).forEach(ing => {
        const li = document.createElement('li');
        li.textContent = ing;
        ingredientsList.appendChild(li);
      });
      
      // Instructions
      const instructionsList = document.getElementById('instructions-list');
      instructionsList.innerHTML = '';
      (recipe.instructions || []).forEach(inst => {
        const li = document.createElement('li');
        li.textContent = inst;
        instructionsList.appendChild(li);
      });
      
      document.title = recipe.title + ' - Smart Kitchen For Me';
    }

    function setupStars() {
      document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', function() {
          selectedRating = parseInt(this.dataset.rating);
          updateStars(selectedRating);
        });
        star.addEventListener('mouseenter', function() {
          updateStars(parseInt(this.dataset.rating));
        });
      });
      document.getElementById('stars').addEventListener('mouseleave', function() {
        updateStars(selectedRating);
      });
    }

    function updateStars(rating) {
      document.querySelectorAll('.star').forEach((star, i) => {
        star.classList.toggle('active', i < rating);
      });
    }

    function setupSubmit() {
      document.getElementById('submit-rating').addEventListener('click', function() {
        if (selectedRating === 0) {
          showToast('Please select a rating!');
          return;
        }
        // Save locally
        const ratings = JSON.parse(localStorage.getItem('recipe_ratings') || '[]');
        ratings.push({
          recipe: currentRecipe?.title,
          rating: selectedRating,
          comment: document.getElementById('comment-input').value,
          date: new Date().toISOString()
        });
        localStorage.setItem('recipe_ratings', JSON.stringify(ratings));
        
        document.getElementById('success-msg').classList.add('show');
        this.disabled = true;
        this.textContent = 'Submitted!';
      });
    }

    function shareToFacebook() {
      window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(window.location.href), '_blank');
    }

    function shareToWhatsApp() {
      const text = 'Check out this recipe: ' + (currentRecipe?.title || 'Recipe') + '\n' + window.location.href;
      window.open('https://wa.me/?text=' + encodeURIComponent(text), '_blank');
    }

    function copyLink() {
      navigator.clipboard.writeText(window.location.href).then(() => {
        showToast('Link copied!');
      });
    }

    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }
  </script>
</body>
</html>
